
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Using it with PuLP &#8212; pytups 0.1 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Documentation for the Code" href="code.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">pytups</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="includeme.html">Pytups</a></li>
<li class="toctree-l1"><a class="reference internal" href="idea.html">Philisophy</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Some examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="code.html">Documentation for the Code</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Using it with PuLP</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#nomenclature">Nomenclature</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-scheduling-problem">Example: Scheduling problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mathematical-formulation">Mathematical formulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#implementation-using-pulp-and-pytups">Implementation using pulp and pytups</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="code.html" title="previous chapter">Documentation for the Code</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="using-it-with-pulp">
<h1>Using it with PuLP<a class="headerlink" href="#using-it-with-pulp" title="Permalink to this headline">¶</a></h1>
<div class="section" id="nomenclature">
<h2>Nomenclature<a class="headerlink" href="#nomenclature" title="Permalink to this headline">¶</a></h2>
<dl class="glossary simple">
<dt id="term-variable-declaration">Variable declaration</dt><dd><p>A variable declaration is the creation of a group of decision variables that share the same naming and significance. In <cite>PuLP</cite> they are all created within a single call to <a class="reference external" href="https://pythonhosted.org/PuLP/pulp.html#pulp.LpVariable.dicts" title="(in PuLP v1.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pulp.LpVariable.dicts()</span></code></a> and they are all accessed by slicing the same <cite>python</cite> variable created. An optimization problem can have one variable declaration but thousands of variables.</p>
</dd>
<dt id="term-variable-domain">Variable domain</dt><dd><p>The complete space over which variables are created. The length of the domain
is the number of variables. Each variable declaration has its own domain
and is indicated with the argument <cite>index</cite> when calling the function <a class="reference external" href="https://pythonhosted.org/PuLP/pulp.html#pulp.LpVariable.dicts" title="(in PuLP v1.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pulp.LpVariable.dicts()</span></code></a>. It usually consists of some kind of iterator where all its elements should be unique.</p>
</dd>
</dl>
<p>When using <a class="reference external" href="https://pythonhosted.org/PuLP/pulp.html#module-pulp" title="(in PuLP v1.6)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pulp</span></code></a>, I use the following guidelines for variable declaration:</p>
<ol class="arabic simple">
<li><p>Use <a class="reference external" href="https://pythonhosted.org/PuLP/pulp.html#pulp.LpVariable.dicts" title="(in PuLP v1.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pulp.LpVariable.dicts()</span></code></a>, unless there is a very good reason not to.</p></li>
<li><p>Use python lists for variable domains.</p></li>
<li><p>Use <cite>pytups</cite> to index parts of the domain for constraint generation.</p></li>
</ol>
</div>
<div class="section" id="example-scheduling-problem">
<h2>Example: Scheduling problem<a class="headerlink" href="#example-scheduling-problem" title="Permalink to this headline">¶</a></h2>
<p>Assume we are given a set of jobs <span class="math notranslate nohighlight">\(j\)</span> with processing times <span class="math notranslate nohighlight">\(p_j\)</span>. For a single machine non-preemptive scheduling problem (which we assume here), a schedule of the jobs <span class="math notranslate nohighlight">\(N\)</span> is given by specifying a start time, <span class="math notranslate nohighlight">\(Y_j\)</span> , for each job. If job j starts at time <span class="math notranslate nohighlight">\(Y_j\)</span>, it is processing during the time interval <span class="math notranslate nohighlight">\([Y_j , Y_j + p_j ]\)</span>. A schedule is feasible if no two jobs have overlapping processing times.</p>
<p>This means that, for every pair of jobs <span class="math notranslate nohighlight">\(i\)</span> and <span class="math notranslate nohighlight">\(j\)</span>, we have that either <span class="math notranslate nohighlight">\(Y_j \geq Y_i +p_i\)</span> , or <span class="math notranslate nohighlight">\(Y_i \geq Y_j +p_j\)</span>.</p>
<p>Job <span class="math notranslate nohighlight">\(j\)</span> will complete at time <span class="math notranslate nohighlight">\(C_j =(Y_j + p_j )\)</span>, and if it also has an associated due date, <span class="math notranslate nohighlight">\(d_j\)</span> , its tardiness, <span class="math notranslate nohighlight">\(T_j\)</span> , is defined to be:</p>
<div class="math notranslate nohighlight">
\begin{eqnarray}
   T_j    &amp; = &amp; (C_j - d_j)^+ \\
   T_j    &amp; = &amp; (Y_j + p_j - d_j)^+
\end{eqnarray}</div><p>If we are given a set of weights, <span class="math notranslate nohighlight">\(w_j\)</span> , which indicate a relative importance between individual jobs, we can calculate the total weighted tardiness of a given feasible schedule:</p>
<div class="math notranslate nohighlight">
\begin{eqnarray}
   TWT    &amp; = &amp; \sum_{j \in N} w_j T_j \\
   TWT    &amp; = &amp; \sum_{j \in N} w_j (Y_j + p_j - d_j)^+
\end{eqnarray}</div><p>The objective is to schedule all the jobs without overlapping them and minimizing the total weighted tardiness <span class="math notranslate nohighlight">\(TWT\)</span>.</p>
</div>
<div class="section" id="mathematical-formulation">
<h2>Mathematical formulation<a class="headerlink" href="#mathematical-formulation" title="Permalink to this headline">¶</a></h2>
<p>SETS</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 51%" />
<col style="width: 49%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(j \in J\)</span></p></td>
<td><p>jobs</p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(k \in K = \{1, ..., C_{max}\}\)</span></p></td>
<td><p>time periods</p></td>
</tr>
</tbody>
</table>
<p>DATA [UNITS]</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 22%" />
<col style="width: 78%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(p_j\)</span></p></td>
<td><p>processing time of job j [time periods]</p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(d_j\)</span></p></td>
<td><p>due date of job j [time period]</p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(w_j\)</span></p></td>
<td><p>weight or priority of job j [dimensionless]</p></td>
</tr>
</tbody>
</table>
<p>DERIVED DATA</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 13%" />
<col style="width: 87%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(C_{max}\)</span></p></td>
<td><p>Size of planning horizon.</p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(JK\)</span></p></td>
<td><p>Al possible starting periods (j, k) for job <span class="math notranslate nohighlight">\(j \in J\)</span> in time periods <span class="math notranslate nohighlight">\(k \in K\)</span>.</p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(K_j\)</span></p></td>
<td><p>Al possible starting periods k for job <span class="math notranslate nohighlight">\(j \in J\)</span>.</p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(t_{jk}\)</span></p></td>
<td><p>Penalty for starting job <span class="math notranslate nohighlight">\(j \in J\)</span> in time period <span class="math notranslate nohighlight">\(k \in K\)</span>.</p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(K2_{jk}\)</span></p></td>
<td><p>All affected time periods <span class="math notranslate nohighlight">\(k2 \in K2\)</span> when starting a job <span class="math notranslate nohighlight">\(j\)</span> in time period <span class="math notranslate nohighlight">\(k \in K\)</span>.</p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(JK_{k2}\)</span></p></td>
<td><p>All possible starts of jobs <span class="math notranslate nohighlight">\((j, k) \in JK\)</span> that affect the availability of time period <span class="math notranslate nohighlight">\(k2 \in K\)</span>.</p></td>
</tr>
</tbody>
</table>
<div class="math notranslate nohighlight">
\begin{eqnarray}
   &amp;C_{max}  &amp;= &amp;\sum_{j \in J} p_j \\
   &amp;JK               &amp;= &amp;\{(j \in J, k \in K) \mid k + p_j \leq C_{max} \} \\
   &amp;K_j              &amp;= &amp;\{k \in K \mid (j, k) \in JK \} &amp; j \in J \\
   &amp;K2_{jk}  &amp;= &amp;\{k \in K \mid k \leq k2 \leq k + p_j \} &amp; (j, k) \in JK \\
   &amp;JK_{k2}  &amp;= &amp;\{(j, k) \in JK \mid k_2 \in K2_{jk} \} &amp; k_2 \in K \\
   &amp;t_{jk}   &amp;= &amp;\max\{k + p_j -1 - d_j, 0\} \times w_j &amp; (j, k) \in JK \\
\end{eqnarray}</div><p>DECISION VARIABLES</p>
<p><span class="math notranslate nohighlight">\(X_{jk}\)</span>. Binary. 1 if job <span class="math notranslate nohighlight">\(j\)</span> starts at time slot <span class="math notranslate nohighlight">\(k\)</span>, 0 otherwise. <span class="math notranslate nohighlight">\((j, k) \in JK\)</span></p>
<p>FORMULATION</p>
<div class="math notranslate nohighlight">
\begin{eqnarray}
   \min \sum_{(j, k) \in JK} t_{jk} X_{jk} \\
\end{eqnarray}</div><p>Subject to:</p>
<div class="math notranslate nohighlight">
\begin{eqnarray}
   &amp; \sum_{k \in K_j} X_{jk} = 1 &amp; j \in J \\
   &amp; \sum_{(j, k) \in JK_{k2}} X_{jk} = 1 &amp; k2 \in K \\
\end{eqnarray}</div></div>
<div class="section" id="implementation-using-pulp-and-pytups">
<h2>Implementation using pulp and pytups<a class="headerlink" href="#implementation-using-pulp-and-pytups" title="Permalink to this headline">¶</a></h2>
<p>We import libraries and get input data.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pulp</span> <span class="kn">as</span> <span class="nn">pl</span>
<span class="kn">import</span> <span class="nn">pytups</span> <span class="kn">as</span> <span class="nn">pt</span>

<span class="c1"># Get input data</span>
<span class="n">duration</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">7</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">9</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">10</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">11</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">13</span><span class="p">:</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">14</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">15</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">16</span><span class="p">:</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">17</span><span class="p">:</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">18</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">19</span><span class="p">:</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">20</span><span class="p">:</span> <span class="mi">11</span><span class="p">}</span>
<span class="n">priority</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">11</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">12</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">13</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">14</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">15</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">16</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">17</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">18</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">19</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">20</span><span class="p">:</span> <span class="mi">9</span><span class="p">}</span>
<span class="n">duedate</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="mi">52</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">133</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="mi">53</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="mi">133</span><span class="p">,</span> <span class="mi">7</span><span class="p">:</span> <span class="mi">113</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span> <span class="mi">107</span><span class="p">,</span> <span class="mi">9</span><span class="p">:</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">10</span><span class="p">:</span> <span class="mi">133</span><span class="p">,</span> <span class="mi">11</span><span class="p">:</span> <span class="mi">77</span><span class="p">,</span> <span class="mi">12</span><span class="p">:</span> <span class="mi">126</span><span class="p">,</span> <span class="mi">13</span><span class="p">:</span> <span class="mi">117</span><span class="p">,</span> <span class="mi">14</span><span class="p">:</span> <span class="mi">72</span><span class="p">,</span> <span class="mi">15</span><span class="p">:</span> <span class="mi">111</span><span class="p">,</span> <span class="mi">16</span><span class="p">:</span> <span class="mi">111</span><span class="p">,</span> <span class="mi">17</span><span class="p">:</span> <span class="mi">117</span><span class="p">,</span> <span class="mi">18</span><span class="p">:</span> <span class="mi">69</span><span class="p">,</span> <span class="mi">19</span><span class="p">:</span> <span class="mi">115</span><span class="p">,</span> <span class="mi">20</span><span class="p">:</span> <span class="mi">68</span><span class="p">}</span>

</pre></div>
</div>
<p>We then calculate intermediate sets and parameters. Note the use of pytups functions to filter and convert from tuple lists to dictionaries.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Get intermediate paramters, sets.</span>
<span class="n">C_max</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">duration</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
<span class="n">periods</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="n">C_max</span><span class="p">)</span>
<span class="n">tasks</span> <span class="o">=</span> <span class="n">duration</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

<span class="c1"># all legal combinations of task-period assignment</span>
<span class="n">jk_all</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">TupList</span><span class="p">((</span><span class="n">t</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tasks</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">periods</span><span class="p">)</span>

<span class="c1"># we filter the starts that are too late to be possible:</span>
<span class="n">JK</span> <span class="o">=</span> <span class="n">jk_all</span><span class="o">.</span><span class="n">filter_list_f</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">duration</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">&lt;=</span> <span class="n">C_max</span><span class="p">)</span>

<span class="c1"># we create a set of tasks that can start at time period k</span>
<span class="n">J_k</span> <span class="o">=</span> <span class="n">JK</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">result_col</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># all combinations (t, p, p2) such that I start a task j </span>
<span class="c1"># in time period k and is active in period k2</span>
<span class="n">jkk2</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">TupList</span><span class="p">((</span><span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">k2</span><span class="p">)</span> <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">JK</span> 
				  <span class="k">for</span> <span class="n">k2</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">k</span> <span class="o">+</span> <span class="n">duration</span><span class="p">[</span><span class="n">j</span><span class="p">]))</span>

<span class="c1"># given a period k2, what starts affect make it unavailable:</span>
<span class="n">JK_k2</span> <span class="o">=</span> <span class="n">jkk2</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">result_col</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>

<span class="c1"># given a start (j, k), what periods k2 are made unavailable:</span>
<span class="n">K2_jk</span> <span class="o">=</span> <span class="n">jkk2</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">result_col</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># for each possible start: how late will the task be</span>
<span class="n">t_jk</span> <span class="o">=</span> <span class="p">{(</span><span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span> <span class="nb">max</span><span class="p">(</span><span class="n">duration</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">+</span> <span class="n">k</span> <span class="o">-</span><span class="mi">1</span> <span class="o">-</span> <span class="n">duedate</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span> <span class="o">*</span> 
				<span class="n">priority</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">JK</span><span class="p">}</span>

</pre></div>
</div>
<p>We now create the PuLP model and solve it.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># model construction with PuLP</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">LpProblem</span><span class="p">(</span><span class="s2">&quot;Scheduling&quot;</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">LpMinimize</span><span class="p">)</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">LpVariable</span><span class="o">.</span><span class="n">dicts</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;start&#39;</span><span class="p">,</span> <span class="n">indexs</span><span class="o">=</span><span class="n">JK</span><span class="p">,</span>
                            <span class="n">lowBound</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">upBound</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">cat</span><span class="o">=</span><span class="n">pl</span><span class="o">.</span><span class="n">LpInteger</span><span class="p">)</span>

<span class="c1"># objective function:</span>
<span class="n">model</span> <span class="o">+=</span> <span class="n">pl</span><span class="o">.</span><span class="n">lpSum</span><span class="p">(</span><span class="n">X</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">]</span> <span class="o">*</span> <span class="n">t_jk</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">JK</span><span class="p">)</span>

<span class="c1"># one and only one start per task</span>
<span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">tasks</span><span class="p">:</span>
    <span class="n">model</span> <span class="o">+=</span> <span class="n">pl</span><span class="o">.</span><span class="n">lpSum</span><span class="p">(</span><span class="n">X</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">J_k</span><span class="p">[</span><span class="n">j</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span>

<span class="c1"># only one task is active at any moment:</span>
<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">periods</span><span class="p">:</span>
    <span class="n">model</span> <span class="o">+=</span> <span class="n">pl</span><span class="o">.</span><span class="n">lpSum</span><span class="p">(</span><span class="n">X</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">JK_k2</span><span class="p">[</span><span class="n">k</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span>

<span class="c1"># solve model:</span>
<span class="n">solver</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">PULP_CBC_CMD</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="c1"># solver = pl.CPLEX_CMD(msg=True)</span>
<span class="n">model</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">solver</span><span class="p">)</span>

</pre></div>
</div>
<p>We get the solution from the variable contents. Not how we also use pytups to extract the content from the variable.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># get tasks starts</span>
<span class="n">starts_out</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">SuperDict</span><span class="p">(</span><span class="n">X</span><span class="p">)</span><span class="o">.</span><span class="n">vapply</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span><span class="o">.</span><span class="n">keys_l</span><span class="p">()</span>

<span class="n">solution</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">periods</span><span class="p">]</span>
<span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">starts_out</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">p2</span> <span class="ow">in</span> <span class="n">K2_jk</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">]:</span>
        <span class="n">solution</span><span class="p">[</span><span class="n">p2</span><span class="p">]</span> <span class="o">=</span> <span class="n">j</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;solution is </span><span class="se">\n</span><span class="s1">{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">solution</span><span class="p">))</span>
</pre></div>
</div>
<p>Finally, we do some tests on the solution using pytups to guarantee the solution is feasible:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pt</span><span class="o">.</span><span class="n">TupList</span><span class="p">(</span><span class="n">solution</span><span class="p">)</span><span class="o">.</span><span class="n">filter_list_f</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># verify that each task t appears exactly duration[t] times</span>
<span class="n">task_count</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">SuperDict</span><span class="p">()</span><span class="o">.</span><span class="n">fill_with_default</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="n">duration</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="k">for</span> <span class="n">period</span><span class="p">,</span> <span class="n">task</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">solution</span><span class="p">):</span>
    <span class="n">task_count</span><span class="p">[</span><span class="n">task</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="n">task_count</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">duration</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">-</span> <span class="n">v</span><span class="p">)</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span>


</pre></div>
</div>
<p>The whole code is shown below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pulp</span> <span class="kn">as</span> <span class="nn">pl</span>
<span class="kn">import</span> <span class="nn">pytups</span> <span class="kn">as</span> <span class="nn">pt</span>

<span class="c1"># Get input data</span>
<span class="n">duration</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">7</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">9</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">10</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">11</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">13</span><span class="p">:</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">14</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">15</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">16</span><span class="p">:</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">17</span><span class="p">:</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">18</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">19</span><span class="p">:</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">20</span><span class="p">:</span> <span class="mi">11</span><span class="p">}</span>
<span class="n">priority</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">11</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">12</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">13</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">14</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">15</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">16</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">17</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">18</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">19</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">20</span><span class="p">:</span> <span class="mi">9</span><span class="p">}</span>
<span class="n">duedate</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="mi">52</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">133</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="mi">53</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="mi">133</span><span class="p">,</span> <span class="mi">7</span><span class="p">:</span> <span class="mi">113</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span> <span class="mi">107</span><span class="p">,</span> <span class="mi">9</span><span class="p">:</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">10</span><span class="p">:</span> <span class="mi">133</span><span class="p">,</span> <span class="mi">11</span><span class="p">:</span> <span class="mi">77</span><span class="p">,</span> <span class="mi">12</span><span class="p">:</span> <span class="mi">126</span><span class="p">,</span> <span class="mi">13</span><span class="p">:</span> <span class="mi">117</span><span class="p">,</span> <span class="mi">14</span><span class="p">:</span> <span class="mi">72</span><span class="p">,</span> <span class="mi">15</span><span class="p">:</span> <span class="mi">111</span><span class="p">,</span> <span class="mi">16</span><span class="p">:</span> <span class="mi">111</span><span class="p">,</span> <span class="mi">17</span><span class="p">:</span> <span class="mi">117</span><span class="p">,</span> <span class="mi">18</span><span class="p">:</span> <span class="mi">69</span><span class="p">,</span> <span class="mi">19</span><span class="p">:</span> <span class="mi">115</span><span class="p">,</span> <span class="mi">20</span><span class="p">:</span> <span class="mi">68</span><span class="p">}</span>



<span class="c1"># Get intermediate paramters, sets.</span>
<span class="n">C_max</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">duration</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
<span class="n">periods</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="n">C_max</span><span class="p">)</span>
<span class="n">tasks</span> <span class="o">=</span> <span class="n">duration</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

<span class="c1"># all legal combinations of task-period assignment</span>
<span class="n">jk_all</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">TupList</span><span class="p">((</span><span class="n">t</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tasks</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">periods</span><span class="p">)</span>

<span class="c1"># we filter the starts that are too late to be possible:</span>
<span class="n">JK</span> <span class="o">=</span> <span class="n">jk_all</span><span class="o">.</span><span class="n">filter_list_f</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">duration</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">&lt;=</span> <span class="n">C_max</span><span class="p">)</span>

<span class="c1"># we create a set of tasks that can start at time period k</span>
<span class="n">J_k</span> <span class="o">=</span> <span class="n">JK</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">result_col</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># all combinations (t, p, p2) such that I start a task j </span>
<span class="c1"># in time period k and is active in period k2</span>
<span class="n">jkk2</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">TupList</span><span class="p">((</span><span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">k2</span><span class="p">)</span> <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">JK</span> 
				  <span class="k">for</span> <span class="n">k2</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">k</span> <span class="o">+</span> <span class="n">duration</span><span class="p">[</span><span class="n">j</span><span class="p">]))</span>

<span class="c1"># given a period k2, what starts affect make it unavailable:</span>
<span class="n">JK_k2</span> <span class="o">=</span> <span class="n">jkk2</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">result_col</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>

<span class="c1"># given a start (j, k), what periods k2 are made unavailable:</span>
<span class="n">K2_jk</span> <span class="o">=</span> <span class="n">jkk2</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">result_col</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># for each possible start: how late will the task be</span>
<span class="n">t_jk</span> <span class="o">=</span> <span class="p">{(</span><span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span> <span class="nb">max</span><span class="p">(</span><span class="n">duration</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">+</span> <span class="n">k</span> <span class="o">-</span><span class="mi">1</span> <span class="o">-</span> <span class="n">duedate</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span> <span class="o">*</span> 
				<span class="n">priority</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">JK</span><span class="p">}</span>



<span class="c1"># model construction with PuLP</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">LpProblem</span><span class="p">(</span><span class="s2">&quot;Scheduling&quot;</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">LpMinimize</span><span class="p">)</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">LpVariable</span><span class="o">.</span><span class="n">dicts</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;start&#39;</span><span class="p">,</span> <span class="n">indexs</span><span class="o">=</span><span class="n">JK</span><span class="p">,</span>
                            <span class="n">lowBound</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">upBound</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">cat</span><span class="o">=</span><span class="n">pl</span><span class="o">.</span><span class="n">LpInteger</span><span class="p">)</span>

<span class="c1"># objective function:</span>
<span class="n">model</span> <span class="o">+=</span> <span class="n">pl</span><span class="o">.</span><span class="n">lpSum</span><span class="p">(</span><span class="n">X</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">]</span> <span class="o">*</span> <span class="n">t_jk</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">JK</span><span class="p">)</span>

<span class="c1"># one and only one start per task</span>
<span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">tasks</span><span class="p">:</span>
    <span class="n">model</span> <span class="o">+=</span> <span class="n">pl</span><span class="o">.</span><span class="n">lpSum</span><span class="p">(</span><span class="n">X</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">J_k</span><span class="p">[</span><span class="n">j</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span>

<span class="c1"># only one task is active at any moment:</span>
<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">periods</span><span class="p">:</span>
    <span class="n">model</span> <span class="o">+=</span> <span class="n">pl</span><span class="o">.</span><span class="n">lpSum</span><span class="p">(</span><span class="n">X</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">JK_k2</span><span class="p">[</span><span class="n">k</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span>

<span class="c1"># solve model:</span>
<span class="n">solver</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">PULP_CBC_CMD</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="c1"># solver = pl.CPLEX_CMD(msg=True)</span>
<span class="n">model</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">solver</span><span class="p">)</span>



<span class="c1"># get tasks starts</span>
<span class="n">starts_out</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">SuperDict</span><span class="p">(</span><span class="n">X</span><span class="p">)</span><span class="o">.</span><span class="n">vapply</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span><span class="o">.</span><span class="n">keys_l</span><span class="p">()</span>

<span class="n">solution</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">periods</span><span class="p">]</span>
<span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">starts_out</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">p2</span> <span class="ow">in</span> <span class="n">K2_jk</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">]:</span>
        <span class="n">solution</span><span class="p">[</span><span class="n">p2</span><span class="p">]</span> <span class="o">=</span> <span class="n">j</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;solution is </span><span class="se">\n</span><span class="s1">{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">solution</span><span class="p">))</span>

<span class="c1"># verify that all periods are filled:</span>
<span class="c1"># counting if there is any with a minus -1</span>
<span class="n">pt</span><span class="o">.</span><span class="n">TupList</span><span class="p">(</span><span class="n">solution</span><span class="p">)</span><span class="o">.</span><span class="n">filter_list_f</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># verify that each task t appears exactly duration[t] times</span>
<span class="n">task_count</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">SuperDict</span><span class="p">()</span><span class="o">.</span><span class="n">fill_with_default</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="n">duration</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="k">for</span> <span class="n">period</span><span class="p">,</span> <span class="n">task</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">solution</span><span class="p">):</span>
    <span class="n">task_count</span><span class="p">[</span><span class="n">task</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="n">task_count</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">duration</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">-</span> <span class="n">v</span><span class="p">)</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span>


</pre></div>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2019, Franco Peschiera.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/pulp.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>